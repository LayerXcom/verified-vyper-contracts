; ### VIEW FUNCTIONS ###

[balanceOf]
k: #execute => #halt
callData: #abiCallData("balanceOf", #address(OWNER))
gas: {GASCAP} => _
log: _
refund: _
storage:
    #hashedLocation({COMPILER}, {_OWNERTONFTOKENCOUNT}, OWNER) |-> BAL
    _:Map
requires:
    andBool #rangeAddress(OWNER)
    andBool #rangeUInt(256, BAL)

[balanceOf-success]
statusCode: _ => EVMC_SUCCESS
output: _ => #asByteStackInWidth(BAL, 32)
+requires:
    ; NFTs assigned to the zero address are considered invalid, and this function throws for queries about the zero address.
    andBool OWNER =/=Int 0

[balanceOf-failure]
statusCode: _ => EVMC_REVERT
output: _ => _
+requires:
    andBool OWNER ==Int 0


[ownerOf]
k: #execute => #halt
callData: #abiCallData("ownerOf", #uint256(TOKEN_ID))
gas: {GASCAP} => _
log: _
refund: _
storage:
    #hashedLocation({COMPILER}, {_IDTOOWNER}, TOKEN_ID) |-> OWNER
    _:Map
requires:
    andBool #rangeUInt(256, TOKEN_ID)
    andBool #rangeAddress(OWNER)
    andBool #rangeUInt(256, BAL)

[ownerOf-success]
statusCode: _ => EVMC_SUCCESS
output: _ => #asByteStackInWidth(OWNER, 32)
+requires:
    ; NFTs assigned to the zero address are considered invalid, and this function throws for queries about the zero address.
    andBool OWNER =/=Int 0

[ownerOf-failure]
statusCode: _ => EVMC_REVERT
output: _ => _
+requires:
    andBool OWNER ==Int 0


[getApproved]
k: #execute => #halt
callData: #abiCallData("getApproved", #uint256(TOKEN_ID))
gas: {GASCAP} => _
log: _
refund: _
storage:
    #hashedLocation({COMPILER}, {_IDTOOWNER}, TOKEN_ID) |-> OWNER
    #hashedLocation({COMPILER}, {_IDTOAPPROVALS}, TOKEN_ID) |-> APPROVED
    _:Map
requires:
    andBool #rangeUInt(256, TOKEN_ID)
    andBool #rangeAddress(OWNER)
    andBool #rangeAddress(APPROVED)
    andBool #rangeUInt(256, BAL)

[getApproved-success]
statusCode: _ => EVMC_SUCCESS
output: _ => #asByteStackInWidth(APPROVED, 32)
+requires:
    ; Throws if `_tokenId` is not a valid NFT.
    andBool OWNER =/=Int 0

[getApproved-failure]
statusCode: _ => EVMC_REVERT
output: _ => _
+requires:
    andBool OWNER ==Int 0

; TODO: This spec fails. ("Halt! Terminating branch.)
[isApprovedForAll]
k: #execute => #halt
statusCode: _ => EVMC_SUCCESS
output: _ => #asByteStackInWidth(ISAPPROVED, 32)
callData: #abiCallData("isApprovedForAll", #address(OWNER), #address(OPERATOR))
gas: {GASCAP} => _
log: _
refund: _
storage:
    #hashedLocation({COMPILER}, {_OWNERTOOPERATORS}, OWNER OPERATOR) |-> ISAPPROVED
    _:Map
requires:
    andBool #rangeAddress(OWNER)
    andBool #rangeAddress(OPERATOR)
    andBool (ISAPPROVED ==Int 0 orBool ISAPPROVED ==Int 1)


[pgm]
compiler: "Vyper"
_idToOwner: 0
_idToApprovals: 1
_ownerToNFTokenCount: 2
_ownerToOperators: 3
_minter: 4
_supportedInterfaces: 5
code: "0x600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a05263f175355060005114156100d057602060046101403734156100b457600080fd5b60056101405160e05260c052604060c0205460005260206000f3005b6370a08231600051141561013057602060046101403734156100f157600080fd5b600435602051811061010257600080fd5b50600061014051141561011457600080fd5b60026101405160e05260c052604060c0205460005260206000f3005b600015610179575b610160526101405260006101405160e05260c052604060c0205461018052600061018051141561016757600080fd5b61018051600052600051610160515650005b636352211e60005114156101d2576020600461014037341561019a57600080fd5b6101405163383505416101605261014051610180526101805160065801610138565b6101e052610140526101e05160005260206000f3005b600015610221575b6101605261014052600060006101405160e05260c052604060c02054141561020157600080fd5b60016101405160e05260c052604060c02054600052600051610160515650005b63081812fc600051141561027a576020600461014037341561024257600080fd5b61014051636d5e136d61016052610140516101805261018051600658016101da565b6101e052610140526101e05160005260206000f3005b6000156102bd575b61018052610140526101605260036101405160e05260c052604060c0206101605160e05260c052604060c02054600052600051610180515650005b63e985e9c5600051141561034e57604060046101403734156102de57600080fd5b60043560205181106102ef57600080fd5b50602435602051811061030157600080fd5b506101405161016051632d95fdb561018052610140516101a052610160516101c0526101c0516101a05160065801610282565b6102205261016052610140526102205160005260206000f3005b60001561048d575b6101805261014052610160526101405161016051610180516101a05163383505416101c052610160516101e0526101e05160065801610138565b610240526101a052610180526101605261014052610240516101a052610140516101a05114610260526101405161016051610180516101a0516101c0516101e0516102005161022051610240516102605161028051636d5e136d6102a052610160516102c0526102c051600658016101da565b6103205261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526103205161014051146102805260206103e0604463e985e9c5610340526101a05161036052610140516103805261035c6000305af161047157600080fd5b6103e05161028051610260511717600052600051610180515650005b600015610534575b6101c0526101405261016052610180526101a0526101405161016051610180516101a0516101c051634cdc95496101e0526101a051610200526101805161022052610220516102005160065801610356565b610280526101c0526101a0526101805261016052610140526102805161050c57600080fd5b600061014051141561051d57600080fd5b600061016051141561052e57600080fd5b6101c051565b6000156105ab575b61018052610140526101605260006101605160e05260c052604060c020541561056457600080fd5b6101405160006101605160e05260c052604060c0205560026101405160e05260c052604060c02080546001825401101561059d57600080fd5b600181540181555061018051565b600015610621575b6101805261014052610160526101405160006101605160e05260c052604060c02054146105df57600080fd5b600060006101605160e05260c052604060c0205560026101405160e05260c052604060c02060018154101561061357600080fd5b600181540381555061018051565b60001561068b575b6101805261014052610160526101405160006101605160e05260c052604060c020541461065557600080fd5b600060016101605160e05260c052604060c0205414151561068557600060016101605160e05260c052604060c020555b61018051565b60001561083a575b6101a0526101405261016052610180526101405161016051610180516101a0516391127c1f6101c052610140516101e0526101805161020052610200516101e05160065801610629565b6101a0526101805261016052610140526000506101405161016051610180516101a0516101c0516101e051610200516102205161024051639260587e610260526101405161028052610180516102a0526102a05161028051600658016105b3565b6102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e05163ff5ce378610300526101605161032052610180516103405261034051610320516006580161053c565b6102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506101805161016051610140517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60006000a46101a051565b6323b872dd6000511415610964576060600461014037341561085b57600080fd5b600435602051811061086c57600080fd5b50602435602051811061087e57600080fd5b506101405161016051610180516347f467a66101a052610140516101c052610160516101e0526101805161020052336102205261022051610200516101e0516101c05160065801610495565b6101805261016052610140526000506101405161016051610180516101a0516101c0516101e051610200516102205161024051610260516376c68e8661028052610140516102a052610160516102c052610180516102e0526102e0516102c0516102a05160065801610693565b610260526102405261022052610200526101e0526101c0526101a052610180526101605261014052600050005b6342842e0e60005114156109a2576000610600526106008051602001806101c0828460006004600a8704601201f161099b57600080fd5b50506109ef565b63b88d4fde60005114156109e7576104206064356004016101c0376104006064356004013511156109d257600080fd5b6104406064356004016101c0376000506109ef565b600015610e26575b60606004610140373415610a0257600080fd5b6004356020518110610a1357600080fd5b506024356020518110610a2557600080fd5b506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e05161030051610320516103405161036051610380516103a0516103c0516103e05161040051610420516104405161046051610480516104a0516104c0516104e05161050051610520516105405161056051610580516105a0516105c0516105e05161060051610620516347f467a66106405261014051610660526101605161068052610180516106a052336106c0526106c0516106a051610680516106605160065801610495565b61062052610600526105e0526105c0526105a05261058052610560526105405261052052610500526104e0526104c0526104a05261048052610460526104405261042052610400526103e0526103c0526103a05261038052610360526103405261032052610300526102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e05161030051610320516103405161036051610380516103a0516103c0516103e05161040051610420516104405161046051610480516104a0516104c0516104e05161050051610520516105405161056051610580516105a0516105c0516105e05161060051610620516106405161066051610680516106a0516106c0516106e051610700516376c68e866107205261014051610740526101605161076052610180516107805261078051610760516107405160065801610693565b610700526106e0526106c0526106a05261068052610660526106405261062052610600526105e0526105c0526105a05261058052610560526105405261052052610500526104e0526104c0526104a05261048052610460526104405261042052610400526103e0526103c0526103a05261038052610360526103405261032052610300526102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506000610160513b1315610e2457610160513b610d7457600080fd5b61016051301415610d8457600080fd5b6020610d006104a4608063150b7a026108005233610820526101405161084052610180516108605280610880526101c0808051602001808461082001828460006004600a8704601201f1610dd757600080fd5b50508051820160206001820306601f820103905060200191505061081c9050610160515afa610e0557600080fd5b600050610d00516107e05263150b7a026107e05114610e2357600080fd5b5b005b63095ea7b36000511415610f955760406004610140373415610e4757600080fd5b6004356020518110610e5857600080fd5b5061014051610160516101805163383505416101a052610160516101c0526101c05160065801610138565b61022052610180526101605261014052610220516101805261018051610140511415610eae57600080fd5b3360006101605160e05260c052604060c0205414610240526101405161016051610180516101a0516101c0516101e051610200516102205161024051632d95fdb5610260526101805161028052336102a0526102a0516102805160065801610282565b610300526102405261022052610200526101e0526101c0526101a052610180526101605261014052610300516102405117610f4b57600080fd5b6101405160016101605160e05260c052604060c020556101605161014051610180517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560006000a4005b63a22cb46560005114156110425760406004610140373415610fb657600080fd5b6004356020518110610fc757600080fd5b5060243560028110610fd857600080fd5b506000610140511415610fea57600080fd5b6101605160033360e05260c052604060c0206101405160e05260c052604060c02055610160516101805261014051337f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c316020610180a3005b6340c10f19600051141561110d576040600461014037341561106357600080fd5b600435602051811061107457600080fd5b50600454331461108357600080fd5b600061014051141561109457600080fd5b610140516101605163ff5ce37861018052610140516101a052610160516101c0526101c0516101a0516006580161053c565b6101605261014052600050610160516101405160007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60006000a4600160005260206000f3005b6342966c68600051141561135c576020600461014037341561112e57600080fd5b61014051634cdc9549610160523361018052610140516101a0526101a0516101805160065801610356565b61020052610140526102005161116e57600080fd5b6101405161016051610180516101a0516101c0516101e051610200516102205163383505416102405261014051610260526102605160065801610138565b6102c05261022052610200526101e0526101c0526101a0526101805261016052610140526102c051610220526101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516391127c1f6102e05261022051610300526101405161032052610320516103005160065801610629565b6102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e05161030051610320516103405161036051639260587e61038052610220516103a052610140516103c0526103c0516103a051600658016105b3565b610360526103405261032052610300526102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a052610180526101605261014052600050610140516000610220517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60006000a4005b60006000fd" 
gasCap: 100000
